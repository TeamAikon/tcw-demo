import {
  require_react
} from "./chunk-EBC6OZSD.js";
import {
  __commonJS
} from "./chunk-6NOISVLF.js";

// node_modules/oreid-react/dist/index.js
var require_dist = __commonJS({
  "node_modules/oreid-react/dist/index.js"(exports, module) {
    (function(global, factory) {
      typeof exports === "object" && typeof module !== "undefined" ? factory(exports, require_react()) : typeof define === "function" && define.amd ? define(["exports", "react"], factory) : (global = typeof globalThis !== "undefined" ? globalThis : global || self, factory(global["oreid-react"] = {}, global.React));
    })(exports, function(exports2, React) {
      "use strict";
      function _interopDefaultLegacy(e) {
        return e && typeof e === "object" && "default" in e ? e : { "default": e };
      }
      var React__default = _interopDefaultLegacy(React);
      var OreIdContext = React.createContext({
        //@ts-ignore
        oreId: void 0,
        user: void 0,
        setUser: function() {
          return void 0;
        },
        isLoggedIn: false,
        setIsLoggedIn: function() {
          return void 0;
        },
        accessToken: void 0,
        setAccessToken: function() {
          return void 0;
        }
      });
      var Observables = function() {
        var _a = React.useContext(OreIdContext), oreId = _a.oreId, setUser = _a.setUser, setAccessToken = _a.setAccessToken, setIsLoggedIn = _a.setIsLoggedIn;
        var _b = React.useState(oreId.auth.user), authUser = _b[0], setAuthUser = _b[1];
        var updateUserState = React.useCallback(function(newUser) {
          try {
            setUser(newUser === null || newUser === void 0 ? void 0 : newUser.data);
          } catch (err) {
            setUser(void 0);
          }
        }, [setUser]);
        var updateOreIdState = React.useCallback(function(auth) {
          setAuthUser(auth === null || auth === void 0 ? void 0 : auth.user);
          setIsLoggedIn(auth.isLoggedIn);
          setAccessToken(auth.accessToken);
        }, [setAuthUser, setIsLoggedIn, setAccessToken]);
        React.useEffect(function() {
          oreId.auth.subscribe(updateOreIdState);
          return function() {
            oreId.auth.unsubscribe(updateOreIdState);
          };
        }, [oreId, updateOreIdState]);
        React.useEffect(function() {
          if (!authUser)
            return;
          authUser.subscribe(updateUserState);
          authUser.getData().catch(function() {
          });
          return function() {
            authUser.unsubscribe(updateUserState);
          };
        }, [authUser]);
        return null;
      };
      var OreidProvider = function(_a) {
        var children = _a.children, oreId = _a.oreId;
        var _b = React.useState(void 0), user = _b[0], setUser = _b[1];
        var _c = React.useState(false), isLoggedIn = _c[0], setIsLoggedIn = _c[1];
        var _d = React.useState(void 0), accessToken = _d[0], setAccessToken = _d[1];
        React.useEffect(function() {
          if (typeof window === "undefined") {
            return;
          }
          if (!oreId.isInitialized) {
            oreId.init();
          }
        }, []);
        return React__default["default"].createElement(
          OreIdContext.Provider,
          { value: {
            oreId,
            user,
            setUser,
            isLoggedIn,
            setIsLoggedIn,
            accessToken,
            setAccessToken
          } },
          React__default["default"].createElement(Observables, null),
          children
        );
      };
      var useIsLoggedIn = function() {
        var isLoggedIn = React.useContext(OreIdContext).isLoggedIn;
        return isLoggedIn;
      };
      var useOreId = function() {
        var oreId = React.useContext(OreIdContext).oreId;
        return oreId;
      };
      var useUser = function() {
        var user = React.useContext(OreIdContext).user;
        return user;
      };
      exports2.OreidProvider = OreidProvider;
      exports2.useIsLoggedIn = useIsLoggedIn;
      exports2.useOreId = useOreId;
      exports2.useUser = useUser;
      Object.defineProperty(exports2, "__esModule", { value: true });
    });
  }
});
export default require_dist();
//# sourceMappingURL=oreid-react.js.map
